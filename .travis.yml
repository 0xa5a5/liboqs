language: c
dist: trusty
sudo: true
matrix:
  include:
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-4.8
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.8
    coverity_scan:
      project:
        name: open-quantum-safe/liboqs 
        descriptiona: C library for quantum-resistant cryptographic algorithms
      notification_email: coverity-results@openquantumsafe.org
      build_command_prepend: "autoreconf -i;./configure;make clean"
      build_command: "make -j4"
      branch_pattern: coverity_scan
    before_install:
    - sh .travis/install-clang-format-linux.sh
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-4.9
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.9
    before_install:
    - sh .travis/install-clang-format-linux.sh
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-5
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-5
    before_install:
    - sh .travis/install-clang-format-linux.sh
  - os: linux
    compiler: gcc
    env: CC_OQS=gcc-6 USE_OPENSSL=1 ENABLE_NTRU=1
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-6
        - libssl-dev
    before_install:
    - sh .travis/install-clang-format-linux.sh
    - bash download-and-build-ntru.sh
  - os: osx
    compiler: clang
    env: CC_OQS=clang AES_NI=0 USE_OPENSSL=1 ENABLE_CODE_MCBITS=1 ENABLE_NTRU=1
    before_install:
    - brew install clang-format openssl libsodium
    - bash download-and-build-ntru.sh
script:
- CC=$CC_OQS ./.travis-tests.sh
env:
  global:
    secure: 0jPh8FMDGQeSsNRJ14gNmwbPSAaY8385MEiiKlSZZL8CwNDjhQDt0PMWjgz28qO1t5y8fD9d2OeTFmYr9v5VyuDRrgQ2ZByz+EnVBB0fBW+AL32qFu8/ivpjhXfgvPmJL7TMQzsOcyXLCh+kVecXXlsYGET8P1aMbzwaI7GEtkMJnN5lyl8MCpDybqMkFhZ7TMmm8uLTY45rRIIv5psp/Wxwy5nRnvbV41TJTJN1jjdOXInVP5/Ho6Gv+dZHvaI3Th7NiSBM4ukt38vZfKw+XKBbXdsKowI/Yn9u1Knf8snXdENdaucByISZGZ3yzBKjzRVWG9p8igwMJSxYWx62eXw84dWAL+uP2TecDBQ8n7W2YHrCfRni/tKGXNzG1Kgfxa031mD4vz7pccZorNgdf2lG01BXtriLFrM2Dx/jMZ4CCcreOeo8YPq/9p4/NZEEeC+DRLxZxdmIrAgh641OVLixqJqi/C0IcEJ2G6TfGBcWjU7z0HUfKCY0GkOV9HyogD47JwoK691cUn1a6QjoY8JSHx51euT+CL0mspMim2aeGvlb+xRqe4Poic46wYY9lJ3xJfpeKliKXcgJ0H+0RFt4r9hG0dhAjEpZWnHbSZ+zbKRV5w7leHYhhgaPTV4oJGI1jym1NvPcg7l0Jbivempt3GP+/yL6sJVRVsSksy0=
